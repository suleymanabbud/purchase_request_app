<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡</title>
    <link rel="stylesheet" href="./css/fonts.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-yH0/jcKrrO5gYv7FpC18m0tHbdD+fQ6gttxyPjdvVSxGInxjeRGna43EIBgzHuLlHotE5T7BC6czS4Ez+IwBbw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./css/style.css" />
    <style>
        .notification-wrapper {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 10px;
            margin-bottom: 15px;
        }
        .notification-btn {
            background: #427f77;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .notification-btn:hover {
            background: #2f5a54;
        }
        .notification-counter {
            background: #e74c3c;
            color: #fff;
            font-size: 11px;
            min-width: 18px;
            min-height: 18px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 2px 6px;
        }
        .notifications-popover {
            position: absolute;
            top: 65px;
            left: 40px;
            width: 280px;
            max-height: 320px;
            overflow-y: auto;
            background: #fff;
            border: 1px solid #dcdcdc;
            border-radius: 10px;
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
            display: none;
            flex-direction: column;
            z-index: 50;
        }
        .notifications-popover.active {
            display: flex;
        }
        .notifications-popover header {
            padding: 10px 14px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            font-weight: 600;
        }
        .notifications-popover ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .notifications-popover li {
            padding: 12px 14px;
            border-bottom: 1px solid #f5f5f5;
            font-size: 12px;
        }
        .notifications-popover li.unread {
            background: #f7fbff;
        }
        .notifications-popover li small {
            display: block;
            margin-top: 6px;
            color: #7f8c8d;
        }
        .notifications-popover button {
            border: none;
            background: none;
            color: #427f77;
            cursor: pointer;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="document-container" style="position: relative;">
        <div style="text-align: left; margin-bottom: 10px; display:flex; justify-content: space-between; align-items:center;">
            <a href="index.html" style="color: #427f77; text-decoration: none; font-weight: bold;">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <div class="notification-wrapper">
                <button class="notification-btn" id="notificationsBtn"><i class="fas fa-bell"></i> Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª <span class="notification-counter" id="notificationsBadge" style="display:none;">0</span></button>
                <button class="notification-btn" id="markNotificationsRead" style="background:#888;">
                    <i class="fas fa-check"></i> ØªØ¹Ù„ÙŠÙ… ÙƒÙ…Ù‚Ø±ÙˆØ¡
                </button>
            </div>
        </div>
        <div class="notifications-popover" id="notificationsPopover">
            <header>
                <span>Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø©</span>
                <button id="closeNotifications">Ø¥ØºÙ„Ø§Ù‚</button>
            </header>
            <ul id="notificationsList"></ul>
        </div>
        
            <div>
                <div class="sarh">ØµØ±Ø­ Ø§Ù„Ù‚Ø§Ø¨Ø¶Ø©</div>
                <div class="sarh">Sarh Holding</div>
            </div>
        <div class="main-title">Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡ - Purchase Request</div>

        <div class="header">
            <div class="supplier-info">
                <div class="info-row">
                    <span class="info-label">Ù…Ù‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨:</span>
                    <input type="text" class="info-input" id="requester" placeholder="Ø§Ø³Ù… Ù…Ù‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨" required>
                </div>
                <div class="info-row">
                    <span class="info-label">Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</span>
                    <select class="info-input" id="department" required>
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù‚Ø³Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                    </select>
                </div>
                <div class="info-row">
                    <span class="info-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªØ³Ù„ÙŠÙ…:</span>
                    <input type="text" class="info-input" id="deliveryAddress" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªØ³Ù„ÙŠÙ…" required>
                </div>
                <div class="info-row">
                    <span class="info-label">Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…:</span>
                    <input type="date" class="info-input" id="deliveryDate" required>
                </div>
            </div>

            <div class="company-info">
                <div class="info-row">
                    <span class="info-label">ØªØ§Ø±ÙŠØ® Ø·Ù„Ø¨ Ø§Ù„Ø´Ø±Ø§Ø¡:</span>
                    <input type="date" class="info-input" id="orderDate">
                </div>
                <div class="info-row">
                    <span class="info-label">Ø±Ù…Ø² Ø·Ù„Ø¨ Ø§Ù„Ø´Ø±Ø§Ø¡:</span>
                    <input type="text" class="info-input" id="orderNumber" value="PR-" pattern="^PR-.*" title='ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ "PR-" Ù…Ø«Ù„: PR-20251008-001' required>
                </div>
                <div class="info-row">
                    <span class="info-label">Ø±Ù…Ø² Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</span>
                    <input type="text" class="info-input" id="projectCode" placeholder="Ø±Ù…Ø² Ø§Ù„Ù…Ø´Ø±ÙˆØ¹" required>
                </div>
                <div class="info-row">
                    <span class="info-label">Ø§Ù„Ø¹Ù…Ù„Ø©:</span>
                    <select class="currency-select" id="currency">
                        <option value="SYP">Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© (SYP)</option>
                        <option value="USD" selected>Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="table-section">
            <table class="items-table" id="itemsTable">
                <thead>
                    <tr>
                        <th style="width: 6%">#</th>
                        <th style="width: 22%">Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© / Ø§Ù„Ø®Ø¯Ù…Ø©</th>
                        <th style="width: 28%">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„ÙÙ†ÙŠØ©</th>
                        <th style="width: 8%">Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                        <th style="width: 10%">Ø§Ù„Ø¹Ø¯Ø¯</th>
                        <th style="width: 12%">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ</th>
                        <th style="width: 14%">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
                    </tr>
                </thead>
                <tbody id="itemsBody">
                    <tr>
                        <td>1</td>
                        <td><textarea placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø© / Ø§Ù„Ø®Ø¯Ù…Ø©" rows="2" required></textarea></td>
                        <td><textarea placeholder="Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„ÙÙ†ÙŠØ©" rows="2"></textarea></td>
                        <td><input type="text" placeholder="Ù‚Ø·Ø¹Ø©" required></td>
                        <td><input type="number" min="0" step="0.01" oninput="calculateGrandTotal()" required></td>
                        <td><input type="number" min="0" step="0.01" oninput="calculateGrandTotal()" required></td>
                        <td class="row-total">0.00</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr class="total-row">
                        <td colspan="6" style="text-align: right; font-weight: bold;">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ:</td>
                        <td id="grandTotal" style="font-weight: bold;">0.00 $</td>
                    </tr>
                </tfoot>
            </table>
            <button class="add-row-btn" onclick="addNewRow()">+ Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ø¬Ø¯ÙŠØ¯</button>
            
            <!-- Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
            <div class="additional-notes-section" style="margin-top: 20px;">
                <h3 style="color: #698163; margin-bottom: 10px;">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:</h3>
                <textarea id="additionalNotes" 
                    style="width: 100%; height: 80px; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; 
                           font-family: inherit; font-size: 14px; resize: vertical; 
                           border-color: #698163; outline: none;"
                    onfocus="this.style.borderColor='#698163'" 
                    onblur="this.style.borderColor='#e0e0e0'"></textarea>
            </div>

            <div class="approval-section">
                <table class="approval-table">
                    <thead>
                        <tr>
                            <th style="width: 12%">#</th>
                            <th style="width: 14%">Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                            <th style="width: 16%">Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</th>
                            <th style="width: 16%">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</th>
                            <th style="width: 14%">Ø¢Ù…Ø± Ø§Ù„ØµØ±Ù</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="approval-label">Ø§Ù„Ø§Ø³Ù…</td>
                            <td><input type="text" class="approval-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"></td>
                            <td><input type="text" class="approval-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠØ±"></td>
                            <td><input type="text" class="approval-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠ"></td>
                            <td><input type="text" class="approval-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø®ÙˆÙ„"></td>
                        </tr>
                        <tr>
                            <td class="approval-label">Ø§Ù„Ù…Ù†ØµØ¨</td>
                            <td><input type="text" class="approval-input" placeholder="Ù…Ù†ØµØ¨ Ø§Ù„Ø·Ø§Ù„Ø¨"></td>
                            <td><input type="text" class="approval-input" placeholder="Ù…Ø¯ÙŠØ± Ø§Ù„Ù‚Ø³Ù…"></td>
                            <td><input type="text" class="approval-input" placeholder="Ù…Ø¯ÙŠØ± Ù…Ø§Ù„ÙŠ"></td>
                            <td><input type="text" class="approval-input" placeholder="Ù…Ø¯ÙŠØ± Ø§Ù„ØµØ±Ù"></td>
                        </tr>
                        <tr>
                            <td class="approval-label">Ø§Ù„ØªØ§Ø±ÙŠØ®</td>
                            <td><input type="date" class="approval-input"></td>
                            <td><input type="date" class="approval-input"></td>
                            <td><input type="date" class="approval-input"></td>
                            <td><input type="date" class="approval-input"></td>
                        </tr>
                        <tr class="signature-row">
                            <td class="approval-label">Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</td>
                            <td class="signature-cell"></td>
                            <td class="signature-cell"></td>
                            <td class="signature-cell"></td>
                            <td class="signature-cell"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap">
            <button class="print-btn" id="printBtn" onclick="printDocument()" disabled>ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨</button>
            <button class="print-btn" id="saveBtn" onclick="savePurchaseRequest()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨</button>
        </div>
    </div>

    <script src="./js/main.js"></script>
    
    <script>
        // Ø¯Ø§Ù„Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
        function printDocument() {
            window.print();
        }
    </script>
</body>
</html>
