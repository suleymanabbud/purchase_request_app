server {
    listen 80;
    server_name srv1073351.hstgr.cloud 72.60.32.88;
    
    # ===== وضع الصيانة =====
    root /opt/purchase_app/frontend;
    
    location / {
        try_files /maintenance.html =503;
    }
    
    location ~* \.(css|js|png|jpg|gif|ico|svg|woff|woff2|ttf)$ {
        try_files $uri =404;
    }

    location /api/ {
        return 503 '{"error": "النظام قيد الصيانة", "maintenance": true}';
        add_header Content-Type application/json;
    }
    
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header X-Content-Type-Options "nosniff" always;
}

# صفحة الصيانة على البورت 5000 أيضاً
server {
    listen 5000;
    server_name srv1073351.hstgr.cloud 72.60.32.88;
    
    root /opt/purchase_app/frontend;
    
    location / {
        try_files /maintenance.html =503;
    }
    
    location ~* \.(css|js|png|jpg|gif|ico|svg|woff|woff2|ttf)$ {
        try_files $uri =404;
    }

    location /api/ {
        return 503 '{"error": "النظام قيد الصيانة", "maintenance": true}';
        add_header Content-Type application/json;
    }
}
